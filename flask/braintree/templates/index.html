<script src="https://js.braintreegateway.com/web/dropin/1.20.4/js/dropin.min.js"></script>
<div></div>
<button>Pay</button>

<form action="/pay" method="POST">
  <input type="hidden" name="nonce">
</form>

<script type="text/javascript">
  const btn = document.getElementsByTagName("button")[0]
  const input = document.getElementsByTagName("input")[0]

  braintree.dropin.create({
    authorization: '{{token}}',
    container: "div"
  }, (err, instance) => {
    btn.onclick = () => {
      instance.requestPaymentMethod(function(err, payload) {
        input.value = payload.nonce
        documnet.forms[0].submit()
      })
    }
  })
</script>